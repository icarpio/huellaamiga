{% extends 'home/base.html' %}

{% block title %}Inbox{% endblock %}

{% block content %}
<div class="container mt-5">
  <!-- TÃ­tulo de la bandeja de entrada -->
  <h2 class="text-center mb-4 text-primary">Inbox</h2>

  <!-- Tarjeta con las conversaciones -->
<div class="card shadow-sm">
  <div class="card-body">
    <ul class="list-group">
      {% for conversation in conversations %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <a href="{% url 'view_conversation' conversation.id %}" class="d-flex w-100 text-decoration-none text-dark">
            
            <!-- Mostrar el nombre de la protectora si existe -->
            <div class="mb-2">
              {% if conversation.sender == user %}
                <!--{{ conversation.recipient.username }}-->
                {% if conversation.recipient_protector %}
                  {{ conversation.recipient_protector }}
                {% endif %}
              {% else %}
                {{ conversation.sender.username }}
              {% endif %}
            </div>

            <!-- Fecha de inicio -->
            <div class="text-muted">
              <small> &nbsp;&nbsp;&nbsp;{{ conversation.created_at|date:"F j, Y, g:i a" }}</small>
            </div>

          </a>
        </li>
      {% endfor %}
    </ul>
  </div>
</div>

</div>
{% endblock %}


